<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ app_name }} Â· Super Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/app.css') }}" />
    <script src="{{ url_for('static', path='js/htmx.js') }}" defer></script>
    {% block head %}{% endblock %}
  </head>
  <body class="bg-slate-950 text-slate-100">
    <div class="flex min-h-screen">
      <aside class="w-72 bg-slate-900 border-r border-slate-800">
        <div class="px-6 py-6 border-b border-slate-800">
          <p class="text-xs uppercase tracking-widest text-emerald-400">Super Admin</p>
          <h1 class="text-2xl font-semibold tracking-tight">CompliancePulse</h1>
          <p class="text-sm text-slate-400">Platform Control Center</p>
        </div>
        {% set nav_items = [
          {"label": "Overview", "href": "/admin", "id": "overview"},
          {"label": "Organizations", "href": "/admin/orgs", "id": "orgs"},
          {"label": "Users", "href": "/admin/users", "id": "users"},
          {"label": "Active Scans", "href": "/admin/scans", "id": "scans"},
          {"label": "Worker Queue", "href": "/admin/system", "id": "system"},
          {"label": "System Health", "href": "/admin/system#health", "id": "system-health"},
          {"label": "Logs", "href": "/admin/logs", "id": "logs"},
          {"label": "Feature Flags", "href": "/admin/flags", "id": "flags"},
        ] %}
        <nav class="px-4 py-4 space-y-1">
          {% for item in nav_items %}
          {% set active = nav_active == item.id or (nav_active in ['system'] and item.id in ['system','system-health']) %}
          <a
            href="{{ item.href }}"
            class="flex items-center justify-between rounded-lg px-4 py-2 text-sm font-medium transition-colors {% if active %}bg-emerald-500/10 text-emerald-300 border border-emerald-500/30{% else %}text-slate-300 hover:bg-slate-800 hover:text-white{% endif %}"
          >
            <span>{{ item.label }}</span>
            {% if active %}
            <span class="text-[10px] uppercase tracking-widest">LIVE</span>
            {% endif %}
          </a>
          {% endfor %}
        </nav>
      </aside>
      <main class="flex-1 bg-slate-950">
        <header class="flex flex-wrap items-center justify-between gap-4 border-b border-slate-800 px-8 py-6">
          <div>
            <p class="text-xs uppercase tracking-wide text-slate-500">Environment</p>
            <p class="text-xl font-semibold">{{ environment|capitalize }}</p>
          </div>
          <div>
            <p class="text-xs uppercase tracking-wide text-slate-500">Database</p>
            <p class="text-xl font-semibold {% if health_status.status == 'healthy' %}text-emerald-400{% else %}text-amber-400{% endif %}">{{ health_status.status|title }}</p>
            <p class="text-xs text-slate-500">{{ health_status.database }}</p>
          </div>
          <div class="text-right">
            <p class="text-xs uppercase tracking-wide text-slate-500">Signed in</p>
            <p class="text-lg font-semibold">{{ current_user.full_name }}</p>
            <p class="text-xs text-slate-500">{{ current_user.email }}</p>
          </div>
        </header>
        <section class="px-8 py-10">
          {% block content %}{% endblock %}
        </section>
      </main>
    </div>
    {% block scripts %}{% endblock %}
  </body>
</html>
