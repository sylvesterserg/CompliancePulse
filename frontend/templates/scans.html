{% extends "layout.html" %}
{% block content %}
{% set can_manage = membership.role in ['ADMIN', 'OWNER'] %}
<div class="flex flex-wrap items-center justify-between gap-4">
  <div>
    <h1 class="text-2xl font-semibold text-slate-900">Scan History</h1>
    <p class="text-sm text-slate-500">{{ scans|length }} total scans tracked</p>
  </div>
  {% if can_manage %}
  <button
    class="rounded-full bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-500"
    hx-get="/scans/modal/trigger"
    hx-target="#modal-root"
    hx-swap="innerHTML"
  >
    Trigger Scan
  </button>
  {% endif %}
</div>
<div class="mt-6 overflow-hidden rounded-2xl bg-white shadow">
  <table class="min-w-full text-left text-sm">
    <thead class="bg-slate-50 text-xs uppercase tracking-wide text-slate-500">
      <tr>
        <th class="px-4 py-3">Hostname</th>
        <th class="px-4 py-3">Status</th>
        <th class="px-4 py-3">Result</th>
        <th class="px-4 py-3">Score</th>
        <th class="px-4 py-3">Triggered By</th>
        <th class="px-4 py-3 text-right">Completed</th>
      </tr>
    </thead>
    {% include "partials/scans_table.html" %}
  </table>
</div>
{% endblock %}
